{"ast":null,"code":"// Import mock data for fallback\nimport { mockStocks } from './mockData';\nconst RAPID_API_KEY = 'dc1be977cdmsh79d0494f0038291p1a31f6jsncbb77d658c1d';\nconst BASE_URL = 'https://yahoo-finance15.p.rapidapi.com/api/yahoo/qu/quote';\nconst CACHE_DURATION = 5 * 60 * 1000; // 5 minutes cache\n\n// Cache storage\nconst apiCache = {\n  data: null,\n  lastFetch: null\n};\n\n// List of some popular stock symbols\nconst STOCK_SYMBOLS = ['AAPL', 'GOOGL', 'MSFT', 'AMZN', 'META', 'TSLA', 'NVDA', 'JPM', 'BAC', 'WMT', 'DIS', 'NFLX', 'INTC', 'AMD', 'UBER'];\nexport async function fetchStockData() {\n  // Check cache first\n  if (apiCache.data && Date.now() - apiCache.lastFetch < CACHE_DURATION) {\n    console.log('üîµ Using cached data');\n    return apiCache.data;\n  }\n  console.log('üîÑ Fetching live data from Yahoo Finance API...');\n  try {\n    // Create a single request with all symbols\n    const symbolsString = STOCK_SYMBOLS.join('%2C'); // URL encode the comma\n    const response = await fetch(`${BASE_URL}/${symbolsString}`, {\n      method: 'GET',\n      headers: {\n        'X-RapidAPI-Key': RAPID_API_KEY,\n        'X-RapidAPI-Host': 'yahoo-finance15.p.rapidapi.com'\n      }\n    });\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const data = await response.json();\n    console.log('Raw API Response:', data);\n\n    // Transform the API response into our required format\n    const stocks = STOCK_SYMBOLS.map(symbol => {\n      const stockData = data[symbol.toUpperCase()];\n      if (!stockData) return null;\n      return {\n        symbol: symbol,\n        price: parseFloat(stockData.regularMarketPrice || stockData.price || 0),\n        change: parseFloat(stockData.regularMarketChange || stockData.change || 0),\n        changePercent: parseFloat(stockData.regularMarketChangePercent || stockData.changePercent || 0),\n        volume: parseInt(stockData.regularMarketVolume || stockData.volume || 0)\n      };\n    }).filter(stock => stock !== null);\n\n    // If we got no valid results, throw an error\n    if (stocks.length === 0) {\n      throw new Error('No valid stock data received');\n    }\n    console.log('‚úÖ Successfully fetched live data');\n    console.table(stocks.map(s => ({\n      symbol: s.symbol,\n      price: s.price,\n      change: s.change\n    })));\n\n    // Update cache\n    apiCache.data = stocks;\n    apiCache.lastFetch = Date.now();\n    return stocks;\n  } catch (error) {\n    console.error('‚ùå API Error:', error.message);\n    console.log('‚ö†Ô∏è Using fallback mock data');\n    return mockStocks;\n  }\n}","map":{"version":3,"names":["mockStocks","RAPID_API_KEY","BASE_URL","CACHE_DURATION","apiCache","data","lastFetch","STOCK_SYMBOLS","fetchStockData","Date","now","console","log","symbolsString","join","response","fetch","method","headers","ok","Error","status","json","stocks","map","symbol","stockData","toUpperCase","price","parseFloat","regularMarketPrice","change","regularMarketChange","changePercent","regularMarketChangePercent","volume","parseInt","regularMarketVolume","filter","stock","length","table","s","error","message"],"sources":["/Users/shreya/Desktop/DAA(sem-4)/lab-EL/StockSorting_Visualizer/src/api/stockApi.js"],"sourcesContent":["// Import mock data for fallback\nimport { mockStocks } from './mockData';\n\nconst RAPID_API_KEY = 'dc1be977cdmsh79d0494f0038291p1a31f6jsncbb77d658c1d';\nconst BASE_URL = 'https://yahoo-finance15.p.rapidapi.com/api/yahoo/qu/quote';\nconst CACHE_DURATION = 5 * 60 * 1000; // 5 minutes cache\n\n// Cache storage\nconst apiCache = {\n  data: null,\n  lastFetch: null\n};\n\n// List of some popular stock symbols\nconst STOCK_SYMBOLS = [\n  'AAPL', 'GOOGL', 'MSFT', 'AMZN', 'META',\n  'TSLA', 'NVDA', 'JPM', 'BAC', 'WMT',\n  'DIS', 'NFLX', 'INTC', 'AMD', 'UBER'\n];\n\nexport async function fetchStockData() {\n  // Check cache first\n  if (apiCache.data && Date.now() - apiCache.lastFetch < CACHE_DURATION) {\n    console.log('üîµ Using cached data');\n    return apiCache.data;\n  }\n\n  console.log('üîÑ Fetching live data from Yahoo Finance API...');\n  \n  try {\n    // Create a single request with all symbols\n    const symbolsString = STOCK_SYMBOLS.join('%2C'); // URL encode the comma\n    const response = await fetch(`${BASE_URL}/${symbolsString}`, {\n      method: 'GET',\n      headers: {\n        'X-RapidAPI-Key': RAPID_API_KEY,\n        'X-RapidAPI-Host': 'yahoo-finance15.p.rapidapi.com'\n      }\n    });\n\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n\n    const data = await response.json();\n    console.log('Raw API Response:', data);\n\n    // Transform the API response into our required format\n    const stocks = STOCK_SYMBOLS.map(symbol => {\n      const stockData = data[symbol.toUpperCase()];\n      if (!stockData) return null;\n\n      return {\n        symbol: symbol,\n        price: parseFloat(stockData.regularMarketPrice || stockData.price || 0),\n        change: parseFloat(stockData.regularMarketChange || stockData.change || 0),\n        changePercent: parseFloat(stockData.regularMarketChangePercent || stockData.changePercent || 0),\n        volume: parseInt(stockData.regularMarketVolume || stockData.volume || 0)\n      };\n    }).filter(stock => stock !== null);\n\n    // If we got no valid results, throw an error\n    if (stocks.length === 0) {\n      throw new Error('No valid stock data received');\n    }\n\n    console.log('‚úÖ Successfully fetched live data');\n    console.table(stocks.map(s => ({\n      symbol: s.symbol,\n      price: s.price,\n      change: s.change\n    })));\n\n    // Update cache\n    apiCache.data = stocks;\n    apiCache.lastFetch = Date.now();\n    \n    return stocks;\n  } catch (error) {\n    console.error('‚ùå API Error:', error.message);\n    console.log('‚ö†Ô∏è Using fallback mock data');\n    return mockStocks;\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}