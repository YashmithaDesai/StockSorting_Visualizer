{"ast":null,"code":"// Import mock data for fallback\nimport { mockStocks } from './mockData';\nconst RAPID_API_KEY = 'YOUR_RAPID_API_KEY'; // Get from RapidAPI\nconst BASE_URL = 'https://yahoo-finance15.p.rapidapi.com/api/yahoo/qu/quote';\nconst CACHE_DURATION = 5 * 60 * 1000; // 5 minutes cache\n\n// Cache storage\nconst apiCache = {\n  data: null,\n  lastFetch: null\n};\n\n// List of some popular stock symbols\nconst STOCK_SYMBOLS = ['AAPL', 'GOOGL', 'MSFT', 'AMZN', 'META', 'TSLA', 'NVDA', 'JPM', 'BAC', 'WMT', 'DIS', 'NFLX', 'INTC', 'AMD', 'UBER'];\nexport async function fetchStockData() {\n  // Check cache first\n  if (apiCache.data && Date.now() - apiCache.lastFetch < CACHE_DURATION) {\n    console.log('üîµ Using cached data');\n    return apiCache.data;\n  }\n  console.log('üîÑ Fetching live data from Yahoo Finance API...');\n  try {\n    // Create the symbols parameter\n    const symbolsParam = STOCK_SYMBOLS.join(',');\n    const response = await fetch(`${BASE_URL}/${symbolsParam}`, {\n      method: 'GET',\n      headers: {\n        'X-RapidAPI-Key': RAPID_API_KEY,\n        'X-RapidAPI-Host': 'yahoo-finance15.p.rapidapi.com'\n      }\n    });\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const data = await response.json();\n\n    // Transform the API response into our required format\n    const stocks = STOCK_SYMBOLS.map(symbol => {\n      const stockData = data.find(item => item.symbol === symbol);\n      if (!stockData) return null;\n      return {\n        symbol: stockData.symbol,\n        price: parseFloat(stockData.regularMarketPrice) || 0,\n        change: parseFloat(stockData.regularMarketChange) || 0,\n        changePercent: parseFloat(stockData.regularMarketChangePercent) || 0,\n        volume: parseInt(stockData.regularMarketVolume) || 0\n      };\n    }).filter(stock => stock !== null);\n\n    // If we got no valid results, throw an error\n    if (stocks.length === 0) {\n      throw new Error('No valid stock data received');\n    }\n    console.log('‚úÖ Successfully fetched live data');\n    console.table(stocks.map(s => ({\n      symbol: s.symbol,\n      price: s.price,\n      change: s.change\n    })));\n\n    // Update cache\n    apiCache.data = stocks;\n    apiCache.lastFetch = Date.now();\n    return stocks;\n  } catch (error) {\n    console.error('‚ùå API Error:', error.message);\n    console.log('‚ö†Ô∏è Using fallback mock data');\n    return mockStocks;\n  }\n}","map":{"version":3,"names":["mockStocks","RAPID_API_KEY","BASE_URL","CACHE_DURATION","apiCache","data","lastFetch","STOCK_SYMBOLS","fetchStockData","Date","now","console","log","symbolsParam","join","response","fetch","method","headers","ok","Error","status","json","stocks","map","symbol","stockData","find","item","price","parseFloat","regularMarketPrice","change","regularMarketChange","changePercent","regularMarketChangePercent","volume","parseInt","regularMarketVolume","filter","stock","length","table","s","error","message"],"sources":["/Users/shreya/Desktop/DAA(sem-4)/lab-EL/StockSorting_Visualizer/src/api/stockApi.js"],"sourcesContent":["// Import mock data for fallback\nimport { mockStocks } from './mockData';\n\nconst RAPID_API_KEY = 'YOUR_RAPID_API_KEY'; // Get from RapidAPI\nconst BASE_URL = 'https://yahoo-finance15.p.rapidapi.com/api/yahoo/qu/quote';\nconst CACHE_DURATION = 5 * 60 * 1000; // 5 minutes cache\n\n// Cache storage\nconst apiCache = {\n  data: null,\n  lastFetch: null\n};\n\n// List of some popular stock symbols\nconst STOCK_SYMBOLS = [\n  'AAPL', 'GOOGL', 'MSFT', 'AMZN', 'META',\n  'TSLA', 'NVDA', 'JPM', 'BAC', 'WMT',\n  'DIS', 'NFLX', 'INTC', 'AMD', 'UBER'\n];\n\nexport async function fetchStockData() {\n  // Check cache first\n  if (apiCache.data && Date.now() - apiCache.lastFetch < CACHE_DURATION) {\n    console.log('üîµ Using cached data');\n    return apiCache.data;\n  }\n\n  console.log('üîÑ Fetching live data from Yahoo Finance API...');\n  \n  try {\n    // Create the symbols parameter\n    const symbolsParam = STOCK_SYMBOLS.join(',');\n    \n    const response = await fetch(`${BASE_URL}/${symbolsParam}`, {\n      method: 'GET',\n      headers: {\n        'X-RapidAPI-Key': RAPID_API_KEY,\n        'X-RapidAPI-Host': 'yahoo-finance15.p.rapidapi.com'\n      }\n    });\n\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n\n    const data = await response.json();\n    \n    // Transform the API response into our required format\n    const stocks = STOCK_SYMBOLS.map(symbol => {\n      const stockData = data.find(item => item.symbol === symbol);\n      if (!stockData) return null;\n\n      return {\n        symbol: stockData.symbol,\n        price: parseFloat(stockData.regularMarketPrice) || 0,\n        change: parseFloat(stockData.regularMarketChange) || 0,\n        changePercent: parseFloat(stockData.regularMarketChangePercent) || 0,\n        volume: parseInt(stockData.regularMarketVolume) || 0\n      };\n    }).filter(stock => stock !== null);\n\n    // If we got no valid results, throw an error\n    if (stocks.length === 0) {\n      throw new Error('No valid stock data received');\n    }\n\n    console.log('‚úÖ Successfully fetched live data');\n    console.table(stocks.map(s => ({\n      symbol: s.symbol,\n      price: s.price,\n      change: s.change\n    })));\n\n    // Update cache\n    apiCache.data = stocks;\n    apiCache.lastFetch = Date.now();\n    \n    return stocks;\n  } catch (error) {\n    console.error('‚ùå API Error:', error.message);\n    console.log('‚ö†Ô∏è Using fallback mock data');\n    return mockStocks;\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}