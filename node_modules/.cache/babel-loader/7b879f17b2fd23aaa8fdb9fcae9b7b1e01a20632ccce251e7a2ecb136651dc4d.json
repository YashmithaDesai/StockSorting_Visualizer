{"ast":null,"code":"// Import mock data for fallback\nimport { mockStocks } from './mockData';\nconst API_KEY = '2RSK4I9Y1WP3PP3C'; // You'll need to get this from alphavantage.co\nconst BASE_URL = 'https://www.alphavantage.co/query';\nconst CACHE_DURATION = 5 * 60 * 1000; // 5 minutes cache\n\n// Cache storage\nconst apiCache = {\n  data: null,\n  lastFetch: null\n};\n\n// List of some popular stock symbols\nconst STOCK_SYMBOLS = ['AAPL', 'GOOGL', 'MSFT', 'AMZN', 'META', 'TSLA', 'NVDA', 'JPM', 'BAC', 'WMT', 'DIS', 'NFLX', 'INTC', 'AMD', 'UBER'];\nexport async function fetchStockData() {\n  // Check cache first\n  if (apiCache.data && Date.now() - apiCache.lastFetch < CACHE_DURATION) {\n    console.log('üîµ Using cached data');\n    return apiCache.data;\n  }\n  console.log('üîÑ Fetching live data from Alpha Vantage API...');\n  try {\n    // Fetch data for multiple symbols in parallel\n    const promises = STOCK_SYMBOLS.map(symbol => fetch(`${BASE_URL}?function=GLOBAL_QUOTE&symbol=${symbol}&apikey=${API_KEY}`).then(async response => {\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      // Check for API limit message\n      if (data.Note || data['Error Message']) {\n        throw new Error(data.Note || data['Error Message']);\n      }\n      return data;\n    }));\n    const results = await Promise.all(promises);\n\n    // Transform the API response into our required format\n    const stocks = results.map((result, index) => {\n      const quote = result['Global Quote'];\n      if (!quote) return null;\n      return {\n        symbol: STOCK_SYMBOLS[index],\n        price: parseFloat(quote['05. price']) || 0,\n        change: parseFloat(quote['09. change']) || 0,\n        changePercent: parseFloat(quote['10. change percent'].replace('%', '')) || 0,\n        volume: parseInt(quote['06. volume']) || 0\n      };\n    }).filter(stock => stock !== null); // Remove any failed requests\n\n    // If we got no valid results, throw an error\n    if (stocks.length === 0) {\n      throw new Error('No valid stock data received');\n    }\n    console.log('‚úÖ Successfully fetched live data');\n    console.table(stocks.map(s => ({\n      symbol: s.symbol,\n      price: s.price,\n      change: s.change\n    })));\n\n    // Update cache\n    apiCache.data = stocks;\n    apiCache.lastFetch = Date.now();\n    return stocks;\n  } catch (error) {\n    console.error('‚ùå API Error:', error.message);\n    console.log('‚ö†Ô∏è Using fallback mock data');\n    return mockStocks;\n  }\n}","map":{"version":3,"names":["mockStocks","API_KEY","BASE_URL","CACHE_DURATION","apiCache","data","lastFetch","STOCK_SYMBOLS","fetchStockData","Date","now","console","log","promises","map","symbol","fetch","then","response","ok","Error","status","json","Note","results","Promise","all","stocks","result","index","quote","price","parseFloat","change","changePercent","replace","volume","parseInt","filter","stock","length","table","s","error","message"],"sources":["/Users/shreya/Desktop/DAA(sem-4)/lab-EL/StockSorting_Visualizer/src/api/stockApi.js"],"sourcesContent":["// Import mock data for fallback\nimport { mockStocks } from './mockData';\n\nconst API_KEY = '2RSK4I9Y1WP3PP3C'; // You'll need to get this from alphavantage.co\nconst BASE_URL = 'https://www.alphavantage.co/query';\nconst CACHE_DURATION = 5 * 60 * 1000; // 5 minutes cache\n\n// Cache storage\nconst apiCache = {\n  data: null,\n  lastFetch: null\n};\n\n// List of some popular stock symbols\nconst STOCK_SYMBOLS = [\n  'AAPL', 'GOOGL', 'MSFT', 'AMZN', 'META',\n  'TSLA', 'NVDA', 'JPM', 'BAC', 'WMT',\n  'DIS', 'NFLX', 'INTC', 'AMD', 'UBER'\n];\n\nexport async function fetchStockData() {\n  // Check cache first\n  if (apiCache.data && Date.now() - apiCache.lastFetch < CACHE_DURATION) {\n    console.log('üîµ Using cached data');\n    return apiCache.data;\n  }\n\n  console.log('üîÑ Fetching live data from Alpha Vantage API...');\n  \n  try {\n    // Fetch data for multiple symbols in parallel\n    const promises = STOCK_SYMBOLS.map(symbol =>\n      fetch(`${BASE_URL}?function=GLOBAL_QUOTE&symbol=${symbol}&apikey=${API_KEY}`)\n        .then(async response => {\n          if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n          }\n          const data = await response.json();\n          // Check for API limit message\n          if (data.Note || data['Error Message']) {\n            throw new Error(data.Note || data['Error Message']);\n          }\n          return data;\n        })\n    );\n\n    const results = await Promise.all(promises);\n    \n    // Transform the API response into our required format\n    const stocks = results\n      .map((result, index) => {\n        const quote = result['Global Quote'];\n        if (!quote) return null;\n\n        return {\n          symbol: STOCK_SYMBOLS[index],\n          price: parseFloat(quote['05. price']) || 0,\n          change: parseFloat(quote['09. change']) || 0,\n          changePercent: parseFloat(quote['10. change percent'].replace('%', '')) || 0,\n          volume: parseInt(quote['06. volume']) || 0,\n        };\n      })\n      .filter(stock => stock !== null); // Remove any failed requests\n\n    // If we got no valid results, throw an error\n    if (stocks.length === 0) {\n      throw new Error('No valid stock data received');\n    }\n\n    console.log('‚úÖ Successfully fetched live data');\n    console.table(stocks.map(s => ({\n      symbol: s.symbol,\n      price: s.price,\n      change: s.change\n    })));\n\n    // Update cache\n    apiCache.data = stocks;\n    apiCache.lastFetch = Date.now();\n    \n    return stocks;\n  } catch (error) {\n    console.error('‚ùå API Error:', error.message);\n    console.log('‚ö†Ô∏è Using fallback mock data');\n    return mockStocks;\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}